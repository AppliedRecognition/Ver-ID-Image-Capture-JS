window.VerIDImageCapture={UnsupportedDeviceError:function(){this.name="UnsupportedDeviceError",this.message="Unsupported device"},UnsupportedBrowserError:function(){this.name="UnsupportedBrowserError",this.message="Unsupported browser"},Cancellation:function(){this.name="Cancellation",this.message="Capture cancelled by user"},generateQRCode:function(e){return new Promise((function(t,r){function i(){if(!o){o=!0;var r=QRCode.generatePNG(e,{ecclevel:"M",format:"html",fillcolor:"#FFFFFF",textcolor:"#000000",margin:4,modulesize:8});t(r)}}for(var o=!1,n="https://cdn.jsdelivr.net/gh/englishextra/qrjs2@0.1.7/js/qrjs2.min.js",a=document.getElementsByTagName("script"),d=0;d<a.length;d++)if(a[d].getAttribute("src")==n)return void i();var c=document.createElement("script");c.type="text/javascript",c.src=n,c.onreadystatechange=i,c.onload=i,document.head.appendChild(c)}))},captureImages:function(e){return new Promise((function(t,r){if(!navigator.mediaDevices)return r(new VerIDImageCapture.UnsupportedBrowserError);var i=navigator.mediaDevices.getSupportedConstraints();if(!0!==i.width||!0!==i.height)return r(new VerIDImageCapture.UnsupportedBrowserError);var o={video:{width:{min:2048}},audio:!1};!0===i.facingMode&&(o.video.facingMode={exact:e.useFrontCamera?"user":"environment"});var n=[];window.onresize&&n.push(window.onresize),window.onresize=function(e){for(var t=0;t<n.length;t++)n[t](e)},navigator.mediaDevices.getUserMedia(o).then((function(i){var o=document.createElement("style");o.innerHTML="#veridCameraPreview{position:fixed;left:0;top:0;width:100%;height:100%;background-color:#000;font-family:Helvetica,Arial,sans-serif}#veridCameraPreview .prompt{position:absolute;top:0;left:0;right:0;height:40px;background-color:#000;color:#fff;text-align:center;padding:5px;vertical-align:middle;display:flex;align-items:center;justify-content:center}#veridCameraPreview .cardOutline{position:absolute;width:90vw;height:calc(90vw * .63);top:0;right:0;left:0;bottom:0;margin:auto}#veridCameraPreview .cardOutline .corner{position:absolute;width:15%;height:0;padding-top:15%}#veridCameraPreview .cardOutline .corner.top{top:0;border-top:2px solid #fff}#veridCameraPreview .cardOutline .corner.bottom{bottom:0;border-bottom:2px solid #fff}#veridCameraPreview .cardOutline .corner.left{left:0;border-left:2px solid #fff}#veridCameraPreview .cardOutline .corner.right{right:0;border-right:2px solid #fff}#veridCameraPreview .cardOutline .corner.top.left{border-top-left-radius:25%}#veridCameraPreview .cardOutline .corner.top.right{border-top-right-radius:25%}#veridCameraPreview .cardOutline .corner.bottom.left{border-bottom-left-radius:25%}#veridCameraPreview .cardOutline .corner.bottom.right{border-bottom-right-radius:25%}#veridCameraPreview .shutterButton{position:absolute;left:0;right:0;bottom:20px;width:64px;height:64px;border-radius:34px;background-color:#fff;margin:auto;border:4px solid #000;box-shadow:0 0 0 3px #fff;cursor:pointer;z-index:100}#veridCameraPreview .shutterButton svg{position:absolute;left:14px;top:14px}#veridCameraPreview .cancelButton{position:absolute;left:20px;bottom:20px;color:#fff;cursor:pointer;z-index:99}#veridCameraPreview .videoPlayerContainer{position:absolute;top:50px;left:0;bottom:50px;right:0;overflow:hidden}#veridCameraPreview .videoPlayerContainer video{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;min-height:100%}@media (min-aspect-ratio:765/568){#veridCameraPreview .cardOutline{height:calc(90vh - 100px);width:calc((90vh - 100px) * 1.59)}}.flipped{transform:rotateY(180deg)!important;transition:transform 2s}.flipAnimation{position:absolute;top:0;left:0;right:0;bottom:0;perspective:500px;z-index:90}.flipAnimation .card{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width:172px;height:108px;border-radius:6px;background-color:#fff;transform:rotateY(0)}",document.head.appendChild(o);var n=document.createElement("div");n.setAttribute("id","veridCameraPreview"),n.innerHTML='<div class=videoPlayerContainer><video autoplay muted playsinline></video><div class=cardOutline><div class="corner top left"></div><div class="corner top right"></div><div class="corner bottom right"></div><div class="corner bottom left"></div></div></div><div class=prompt>Take picture of the front of your ID card</div><div class=shutterButton><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" fill=black width=36px height=36px><path d="M0 0h24v24H0z" fill=none /><circle cx=12 cy=12 r=3.2 /><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/></svg></div><a class=cancelButton>Cancel</a>',document.body.appendChild(n);var a=document.querySelector("#veridCameraPreview .videoPlayerContainer video"),d=document.querySelector("#veridCameraPreview .prompt"),c=document.querySelector("#veridCameraPreview .cardOutline"),l=document.querySelector("#veridCameraPreview .shutterButton"),s=document.querySelector("#veridCameraPreview .cancelButton"),u={};e&&e.images&&Array.isArray(e.images)&&e.images.length>0?(u={},e.images.forEach((function(e){u[e]=null}))):(e||(e={}),e.images=["front","back"],u={front:null,back:null});var p=0;function m(){return p<e.images.length?e.images[p]:null}function v(){var t=m();return null==t?null:e&&e.prompts&&"object"==typeof e.prompts&&e.prompts.hasOwnProperty(t)?e.prompts[t]:null}function f(){i.getVideoTracks().forEach((function(e){e.stop()})),l.onclick=null,n.parentNode.removeChild(n)}v()?(d.innerText=v(),d.style.display="block"):d.style.display="none",e&&e.displayCardOutline?c.style.display="block":c.style.display="none","srcObject"in a?a.srcObject=i:a.src=URL.createObjectURL(i),l.onclick=function(){var e=document.createElement("canvas");e.width=a.videoWidth,e.height=a.videoHeight,e.getContext("2d").drawImage(a,0,0,a.videoWidth,a.videoHeight);var r=e.toDataURL("image/jpeg"),i=m();if(i&&!u[i]&&(u[i]=r),p++,d&&v()&&(d.innerText=v()),Object.values(u).includes(null)){var o=document.createElement("div");o.className="flipAnimation";var c=document.createElement("div");c.className="card",o.appendChild(c),n.insertBefore(o,l),setTimeout((function(){c.classList.add("flipped")}),10),setTimeout((function(){n.removeChild(o)}),2500)}else f(),setTimeout((function(){t(u)}))},s.onclick=function(){f(),setTimeout((function(){r(new VerIDImageCapture.Cancellation)}))}})).catch((function(e){return e instanceof OverconstrainedError?e=new VerIDImageCapture.UnsupportedDeviceError:e&&"NotAllowedError"==e.name&&(e=new VerIDImageCapture.Cancellation),r(e)}))}))}};
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Test</title>
        <style type="text/css">
        img.captured {
            display: none;
            max-width: calc(100% - 60px);
            margin: 30px;
        }
        </style>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/englishextra/qrjs2@0.1.7/js/qrjs2.min.js"></script>
        <script src="dist/verIDImageCapture.min.js"></script>
        <script type="text/javascript">
        window.onload = () => {
            // To scan the front and back of an ID card
            var settings = {
                "images": ["front","back"],
                "prompts": {
                    "front": "Scan the front of your ID card",
                    "back": "Scan the back of your ID card"
                },
                "displayCardOutline": true,
                "minImageWidth": 2000
            }
            // Capture the images
            VerIDImageCapture.captureImages(settings).then(function(images) {
                document.querySelector("img.captured.front").src = images.front
                document.querySelector("img.captured.back").src = images.back
                document.querySelectorAll("img.captured").forEach(function(img) {
                    img.style.display = "block"
                })
            }).catch(function(error) {
                if (error instanceof VerIDImageCapture.Cancellation || error instanceof VerIDImageCapture.PermissionDenied) {
                    // User cancelled the capture
                    return
                }
                var message
                if (error instanceof VerIDImageCapture.UnsupportedDeviceError) {
                    message = "Your device does not support adequate camera capture. Please scan the QR code with a mobile device."
                } else if (error instanceof VerIDImageCapture.UnsupportedBrowserError) {
                    message = "Your browser does not support camera capture. Please use a different browser or scan the QR code with a mobile device."
                } else {
                    alert("Capture failed: "+error.message)
                    return
                }
                // Generate a QR code with the URL of the current page
                VerIDImageCapture.generateQRCode(location.href).then(function(qrCodeURL) {
                    var img = document.createElement("img")
                    img.src = qrCodeURL
                    // Display the QR code
                    document.body.appendChild(img)
                    var text = document.createElement("p")
                    text.innerText = message
                    // Ask the user to use a mobile device
                    document.body.appendChild(text)
                }).catch(function(error) {
                    // TODO: Handle the error
                })
            })
        }
        </script>
    </head>
    <body>
        <img class="captured front" alt="Front of an ID document" />
        <img class="captured back" alt="Back of an ID document" />
    </body>
</html>